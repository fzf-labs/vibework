# Design: optimize-board-layout

## Architecture Overview

æœ¬è®¾è®¡æ¶‰åŠä¸¤ä¸ªä¸»è¦é¡µé¢çš„å¸ƒå±€é‡æ„ï¼šçœ‹æ¿é¡µé¢å’Œä»»åŠ¡è¯¦æƒ…é¡µã€‚

## 1. çœ‹æ¿é¡µé¢å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åŠŸèƒ½åŒº (Header)                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚ + æ–°å»ºä»»åŠ¡   â”‚  â”‚ ğŸ“ IDEæ‰“å¼€  â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ä»»åŠ¡çœ‹æ¿ (é“ºæ»¡å…¨å±)                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   å¾…åŠ    â”‚ â”‚  è¿›è¡Œä¸­   â”‚ â”‚  å®¡æŸ¥ä¸­   â”‚ â”‚  å·²å®Œæˆ   â”‚   â”‚
â”‚  â”‚          â”‚ â”‚          â”‚ â”‚          â”‚ â”‚          â”‚   â”‚
â”‚  â”‚  [ä»»åŠ¡1]  â”‚ â”‚  [ä»»åŠ¡3]  â”‚ â”‚  [ä»»åŠ¡5]  â”‚ â”‚  [ä»»åŠ¡7]  â”‚   â”‚
â”‚  â”‚  [ä»»åŠ¡2]  â”‚ â”‚  [ä»»åŠ¡4]  â”‚ â”‚  [ä»»åŠ¡6]  â”‚ â”‚  [ä»»åŠ¡8]  â”‚   â”‚
â”‚  â”‚          â”‚ â”‚          â”‚ â”‚          â”‚ â”‚          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å…³é”®å˜æ›´

1. ç§»é™¤å³ä¾§ä»»åŠ¡è¯¦æƒ…ä¾§è¾¹æ  (`TaskDetailSidebar`)
2. ç‚¹å‡»ä»»åŠ¡å¡ç‰‡åä½¿ç”¨ `navigate()` è·³è½¬åˆ° `/task/:taskId`
3. åŠŸèƒ½åŒºç²¾ç®€ï¼Œåªä¿ç•™æ ¸å¿ƒæ“ä½œæŒ‰é’®

## 2. ä»»åŠ¡è¯¦æƒ…é¡µå¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ä»»åŠ¡è¯¦æƒ…é¡µ (å…¨å±)                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     å·¦ä¾§ CLI åŒºåŸŸ           â”‚        å³ä¾§å¤šåŠŸèƒ½å±•ç¤ºåŒº                  â”‚
â”‚     (å›ºå®šå®½åº¦ 40%)          â”‚        (flex-1)                        â”‚
â”‚                            â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      â”‚  â”‚  â”‚ [æ–‡ä»¶é¢„è§ˆ] [å¼€å‘æœåŠ¡å™¨] [Git]    â”‚   â”‚
â”‚  â”‚   CLI æ‰§è¡Œè¾“å‡º        â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”‚                      â”‚  â”‚                                        â”‚
â”‚  â”‚   $ claude-code      â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   > Running task...  â”‚  â”‚  â”‚                                â”‚   â”‚
â”‚  â”‚   > File created     â”‚  â”‚  â”‚     åŠŸèƒ½å±•ç¤ºåŒºåŸŸ                 â”‚   â”‚
â”‚  â”‚                      â”‚  â”‚  â”‚     (æ ¹æ®é€‰æ‹©æ˜¾ç¤ºä¸åŒå†…å®¹)        â”‚   â”‚
â”‚  â”‚                      â”‚  â”‚  â”‚                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚                                â”‚   â”‚
â”‚                            â”‚  â”‚                                â”‚   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”‚  ğŸ’¬ èŠå¤©è¾“å…¥æ¡†        â”‚  â”‚                                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å³ä¾§åŠŸèƒ½é¢æ¿è¯¦ç»†è®¾è®¡

#### åŠŸèƒ½æŒ‰é’®æ 

| æŒ‰é’® | å›¾æ ‡ | åŠŸèƒ½æè¿° |
|------|------|----------|
| æ–‡ä»¶é¢„è§ˆ | `FileText` | æ˜¾ç¤ºä»»åŠ¡ç›¸å…³çš„æ–‡ä»¶åˆ—è¡¨å’Œé¢„è§ˆ |
| å¼€å‘æœåŠ¡å™¨ | `Play` | å¯åŠ¨/åœæ­¢å¼€å‘æœåŠ¡å™¨ï¼Œæ˜¾ç¤ºé¢„è§ˆ |
| Git | `GitBranch` | Gitæ“ä½œé¢æ¿ |

#### Git åŠŸèƒ½é¢æ¿

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Git æ“ä½œé¢æ¿                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [å˜æ›´æ–‡ä»¶] [æäº¤å†å²] [åˆ†æ”¯]            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                        â”‚
â”‚  å˜æ›´æ–‡ä»¶åˆ—è¡¨:                          â”‚
â”‚  â”œâ”€ M src/components/Button.tsx        â”‚
â”‚  â”œâ”€ A src/pages/NewPage.tsx            â”‚
â”‚  â””â”€ D src/utils/old.ts                 â”‚
â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ [åˆå¹¶] [åˆ›å»ºPR] [å˜åŸº]            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 3. ç»„ä»¶ç»“æ„

### æ–°å¢ç»„ä»¶

```
src/renderer/src/components/
â”œâ”€â”€ task/
â”‚   â”œâ”€â”€ RightPanel.tsx          # å³ä¾§å¤šåŠŸèƒ½é¢æ¿å®¹å™¨
â”‚   â”œâ”€â”€ RightPanelTabs.tsx      # åŠŸèƒ½æŒ‰é’®æ 
â”‚   â”œâ”€â”€ FilePreviewPanel.tsx    # æ–‡ä»¶é¢„è§ˆé¢æ¿
â”‚   â”œâ”€â”€ DevServerPanel.tsx      # å¼€å‘æœåŠ¡å™¨é¢æ¿
â”‚   â””â”€â”€ GitPanel.tsx            # Gitæ“ä½œé¢æ¿
â”‚       â”œâ”€â”€ GitChanges.tsx      # å˜æ›´æ–‡ä»¶åˆ—è¡¨
â”‚       â”œâ”€â”€ GitHistory.tsx      # æäº¤å†å²
â”‚       â””â”€â”€ GitActions.tsx      # Gitæ“ä½œæŒ‰é’®
```

### ä¿®æ”¹ç»„ä»¶

- `BoardPage.tsx`: ç§»é™¤ä¾§è¾¹æ ï¼Œç®€åŒ–å¸ƒå±€
- `TaskDetailPage.tsx`: é‡æ„ä¸ºå·¦å³åˆ†æ å¸ƒå±€

## 4. æ•°æ®æµ

### Git æ“ä½œ API

éœ€è¦æ–°å¢ä»¥ä¸‹ IPC APIï¼š

```typescript
// preload/index.d.ts
interface GitAPI {
  getStatus(workdir: string): Promise<GitStatus>;
  getChangedFiles(workdir: string): Promise<GitFile[]>;
  commit(workdir: string, message: string): Promise<void>;
  merge(workdir: string, branch: string): Promise<void>;
  rebase(workdir: string, branch: string): Promise<void>;
  createPR(workdir: string, title: string, body: string): Promise<string>;
}
```

## 5. çŠ¶æ€ç®¡ç†

å³ä¾§é¢æ¿ä½¿ç”¨æœ¬åœ°çŠ¶æ€ç®¡ç†ï¼š

```typescript
type RightPanelTab = 'files' | 'server' | 'git';

interface RightPanelState {
  activeTab: RightPanelTab;
  gitSubTab: 'changes' | 'history' | 'branches';
}
```

